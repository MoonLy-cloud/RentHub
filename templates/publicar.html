<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Publicar Propiedad - RentHub</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" type="text/css" href="../static/CSS/styles.css">
  <link rel="stylesheet" type="text/css" href="../static/CSS/publicar.css">
  <link rel="stylesheet" href="/static/CSS/custom.css">
  <link rel="stylesheet" href="../static/CSS/auth-modal.css">
  <!-- AOS para animaciones -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <!-- MapBox CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" rel="stylesheet">
  <!-- SweetAlert2 for notifications -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>
<body>
<div id="navbar-container"></div>

<!-- Hero section small -->
<section class="bg-primary text-white py-4 mb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1 class="display-6 fw-bold mb-0"><i class="bi bi-house-add"></i> Publicar una propiedad</h1>
      </div>
      <div class="col-md-6">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb justify-content-md-end mb-0">
            <li class="breadcrumb-item"><a href="/" class="text-white text-decoration-none">Inicio</a></li>
            <li class="breadcrumb-item text-white-50" aria-current="page">Publicar Propiedad</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</section>

<div class="container mb-5 auth-check">
  <div class="row">
    <!-- Formulario principal -->
    <div class="col-lg-8" data-aos="fade-right">
      <div class="card shadow-sm border-0 rounded-4 mb-4">
        <div class="card-header bg-white border-0 py-3">
          <h4 class="mb-0 text-primary"><i class="bi bi-info-circle"></i> Información básica</h4>
        </div>
        <div class="card-body p-4">
          <form id="property-form" enctype="multipart/form-data">
            <div class="mb-4">
              <label for="nombre" class="form-label fw-medium required-field">Nombre del lugar</label>
              <div class="input-group">
                <span class="input-group-text bg-light"><i class="bi bi-building"></i></span>
                <input type="text" class="form-control form-control-lg" id="nombre" placeholder="Ej: Salón para eventos en Polanco" required>
              </div>
              <div class="form-text">Un nombre atractivo aumenta la visibilidad de tu propiedad.</div>
              <div class="invalid-feedback">Por favor ingresa un nombre para tu propiedad.</div>
            </div>

            <div class="mb-4">
              <label for="descripcion" class="form-label fw-medium required-field">Descripción</label>
              <div class="input-group">
                <span class="input-group-text bg-light"><i class="bi bi-card-text"></i></span>
                <textarea class="form-control" id="descripcion" rows="5" placeholder="Describe detalladamente las características del lugar, comodidades, servicios incluidos..." required></textarea>
              </div>
              <div class="form-text">Una descripción completa mejora las probabilidades de conseguir inquilinos.</div>
              <div class="invalid-feedback">Por favor ingresa una descripción.</div>
            </div>

            <div class="row mb-4">
              <div class="col-md-6">
                <label for="precio" class="form-label fw-medium required-field">Precio por evento ($)</label>
                <div class="input-group">
                  <span class="input-group-text bg-light"><i class="bi bi-currency-dollar"></i></span>
                  <input type="number" class="form-control form-control-lg" id="precio" placeholder="0.00" min="0" step="0.01" required>
                </div>
                <div class="form-text">Define un precio competitivo para tu mercado.</div>
                <div class="invalid-feedback">Por favor ingresa un precio válido.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label fw-medium required-field">Disponibilidad</label>
                <div class="d-flex gap-3 border rounded-3 p-3 bg-light h-100 align-items-center">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="radio" name="disponible" id="disponible1" value="1" checked>
                    <label class="form-check-label" for="disponible1">
                      <span class="badge bg-success"><i class="bi bi-check-circle me-1"></i>Disponible</span>
                    </label>
                  </div>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="radio" name="disponible" id="disponible0" value="0">
                    <label class="form-check-label" for="disponible0">
                      <span class="badge bg-danger"><i class="bi bi-x-circle me-1"></i>No disponible</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
        </div>
      </div>

      <div class="card shadow-sm border-0 rounded-4 mb-4">
        <div class="card-header bg-white border-0 py-3">
          <h4 class="mb-0 text-primary"><i class="bi bi-geo-alt"></i> Ubicación</h4>
        </div>
        <div class="card-body p-4">
            <div class="mb-4">
              <label for="direccion" class="form-label fw-medium required-field">Dirección</label>
              <div id="geocoder" class="geocoder mb-2"></div>
              <div class="d-flex gap-2 mb-3">
                <button type="button" id="btn-ubicacion-actual" class="btn btn-outline-primary">
                  <i class="bi bi-geo-alt"></i> Usar mi ubicación actual
                </button>
                <button type="button" id="btn-refinar-ubicacion" class="btn btn-outline-secondary">
                  <i class="bi bi-pencil-square"></i> Ajustar manualmente
                </button>
              </div>
              <div id="map" class="map-container rounded-4 shadow-sm"></div>
              <div class="mt-2 d-flex align-items-center text-muted">
                <i class="bi bi-info-circle me-2"></i>
                <small>Mueve el marcador para ajustar la ubicación exacta</small>
              </div>
              <input type="hidden" id="latitud" name="latitud">
              <input type="hidden" id="longitud" name="longitud">
              <input type="hidden" id="direccion" name="direccion">
              <div class="mt-3">
                <div class="alert alert-info mb-0" id="direccion-display">
                  <i class="bi bi-pin-map"></i> <span>Selecciona una ubicación en el mapa</span>
                </div>
              </div>
            </div>
        </div>
      </div>

      <div class="card shadow-sm border-0 rounded-4 mb-4">
        <div class="card-header bg-white border-0 py-3">
          <h4 class="mb-0 text-primary"><i class="bi bi-images"></i> Imágenes</h4>
        </div>
        <div class="card-body p-4">
            <div class="mb-3">
              <label for="imagen" class="form-label fw-medium required-field">Imagen principal</label>
              <div class="input-group mb-3">
                <span class="input-group-text bg-light"><i class="bi bi-camera"></i></span>
                <input type="file" class="form-control" id="imagen" accept="image/*" required>
              </div>
              <div class="form-text">Sube una imagen de alta calidad que muestre lo mejor de tu propiedad.</div>
              <div class="invalid-feedback">Por favor selecciona una imagen.</div>
              <div class="mt-3">
                <div class="image-preview-container text-center">
                  <img id="image-preview" class="image-preview rounded-4 shadow-sm" alt="Vista previa de la imagen">
                </div>
              </div>
            </div>
            
            <div class="d-grid gap-2 mt-4">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="bi bi-cloud-upload me-2"></i>Publicar propiedad
              </button>
              <a href="/" class="btn btn-outline-secondary">
                <i class="bi bi-x-circle me-2"></i>Cancelar
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Sidebar con consejos -->
    <div class="col-lg-4" data-aos="fade-left">
      <div class="sticky-lg-top" style="top: 80px; z-index: 1000;">
        <div class="card border-0 shadow-sm rounded-4 mb-4">
          <div class="card-header bg-white border-0 py-3">
            <h4 class="mb-0 text-primary"><i class="bi bi-lightbulb"></i> Consejos útiles</h4>
          </div>
          <div class="card-body p-4">
            <div class="mb-3">
              <h5 class="mb-3 d-flex align-items-center">
                <span class="bg-primary bg-opacity-10 rounded-circle p-2 me-2">
                  <i class="bi bi-image-alt text-primary"></i>
                </span>
                Imágenes de calidad
              </h5>
              <p class="text-muted mb-0">Las propiedades con buenas fotografías reciben hasta un 70% más de visitas. Usa imágenes bien iluminadas y de alta resolución.</p>
            </div>
            <hr class="my-3">
            <div class="mb-3">
              <h5 class="mb-3 d-flex align-items-center">
                <span class="bg-primary bg-opacity-10 rounded-circle p-2 me-2">
                  <i class="bi bi-pin-map text-primary"></i>
                </span>
                Ubicación precisa
              </h5>
              <p class="text-muted mb-0">Asegúrate de marcar correctamente la ubicación. Una dirección exacta mejora la confianza de los posibles clientes.</p>
            </div>
            <hr class="my-3">
            <div class="mb-3">
              <h5 class="mb-3 d-flex align-items-center">
                <span class="bg-primary bg-opacity-10 rounded-circle p-2 me-2">
                  <i class="bi bi-clipboard-check text-primary"></i>
                </span>
                Descripción detallada
              </h5>
              <p class="text-muted mb-0">Incluye toda la información relevante: capacidad, servicios incluidos, reglas de uso y detalles del espacio.</p>
            </div>
            <hr class="my-3">
            <div>
              <h5 class="mb-3 d-flex align-items-center">
                <span class="bg-primary bg-opacity-10 rounded-circle p-2 me-2">
                  <i class="bi bi-currency-dollar text-primary"></i>
                </span>
                Precios competitivos
              </h5>
              <p class="text-muted mb-0">Investiga precios de propiedades similares en tu zona para establecer un precio justo y atractivo.</p>
            </div>
          </div>
        </div>
        <div class="card border-0 shadow-sm rounded-4 text-bg-primary">
          <div class="card-body p-4">
            <h4 class="mb-3"><i class="bi bi-question-circle"></i> ¿Necesitas ayuda?</h4>
            <p>Si tienes dudas sobre cómo publicar tu propiedad, nuestro equipo está disponible para ayudarte.</p>
            <a href="#" class="btn btn-light"><i class="bi bi-chat-dots me-2"></i>Contactar soporte</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Auth modals component -->
<div data-component="auth-modals"></div>

<!-- Scripts -->
<script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
<script src="../static/JavaScript/components.js"></script>
<script src="../static/JavaScript/navbar.js"></script>
<script src="../static/JavaScript/auth.js"></script>
<script src="../static/JavaScript/api-helper.js"></script>

<!-- MapBox -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  // Inicializar AOS
  document.addEventListener('DOMContentLoaded', function() {
    AOS.init({
      duration: 800,
      once: true
    });
  });
</script>
<script src="../static/JavaScript/publicar.js"></script>
</body>
</html>